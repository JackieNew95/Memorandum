Day5

第三章 类型、值和变量

变量声明
* JavaScript中使用var声明变量，未在声明语句中给定初始值的，其初始值为undefined
* JavaScript变量可以是任意类型，不用指定类型

作用域
* 变量的作用域是程序源代码中定义这个变量的区域
* 全局变量拥有全局作用域，在JavaScript代码中的任何地方都是有定义的。
* 在函数内声明的变量只在函数体内有定义，他们是局部变量，作用域是局部性的。
* 参数也是局部变量
* 在函数体内，局部变量的优先级高于同名的全局变量
* 局部变量声明是必须使用var

函数作用域和声明提前
* 函数作用域：变量在声明在它们的函数体以及这个函数体嵌套的任意函数体内都是有定义的。
* 声明提前：JavaScript函数里声明的所有变量（但不涉及赋值）都被“提前”至函数体的顶部。（注：这步操作是JavaScript引擎在预编译时进行的，在代码运行之前）

作为属性的变量
* 当声明一个JavaScript全局变量时，实际上是定义了全局对象的一个属性。
* 当使用var声明一个变量时，创建的这个属性是不可配置的，也就是说这个变量无法通过delete运算符来删除。
* 但如果你没有使用严格模式并给一个未声明的变量赋值的话，javascript会自动创建一个全局变量。以这种方式创建的变量是全局对象的正常可本会属性，并可以删除它们。。
* this关键字可以引用全局变量，但没有方法引用局部变量
```
var truevar=1;
fakevar=2;
this.fakevar2=3;
delete truevar//false 变量未删除
delete fakevar//true 变量已删除
delete fakevar2//true 变量已删除
```

作用域链
* 当代码在一个环境中执行时，会创建变量对象的一个作用域链（作用域形成的链条）
  * 作用域链的前端，始终都是当前执行的代码所在环境的变量对象
  * 作用域链中的下一个对象来自于外部环境，而在下一个变量对象则来自下一个外部环境，一直到全局执行环境
  * 全局执行环境的变量对象始终都是作用域链上的最后一个对象
* 内部环境可以通过作用域链访问所有外部环境，但外部环境不能访问内部环境的任何变量和函数。

```
var n = 10;
function outer(){
  function inner(){
    function center(){
      console.log(n);
    }
    center();
  }
  inner();
  var n = 15;
}
outer(); //=> undefined
```

* 如函数的执行，形成一个私有作用域，形参和当前私有作用域中声明的变量都是私有变量，保存在内部的一个变量对象中，其下一个外部环境可能是函数，也就包含了函数的内部变量对象，直到全局作用域。
* 当在内部函数中，需要访问一个变量的时候，首先会访问函数本身的变量对象，是否有这个变量，如果没有，那么会继续沿作用域链往上查找，直到全局作用域。如果在某个变量对象中找到则使用该变量对象中的变量值。
* 由于变量的查找是沿着作用域链来实现的，所以也称作用域链为变量查找的机制。
