Day4

第三章

类型转换

* 原始值到原始值的简单转换

|值|转换为|字符串|数字|布尔值|对象|
|:-:|:-:|:-:|:-:|:-:|:-:|
|undefined||"undefined"|NaN|false|throw TypeError|
|null||"null"|0|false|throw TypeError|
|true||"true"|1||new Boolean(true)|
|false||"false"|0||new Boolean(false)|
|""(空字符串)|||0|false|new String("")|
|"1.2"(非空，数字)|||1.2|true|new String("1.2")|
|"one"(非空，数字)|||NaN|true|new String("one")|
|0||"0"||false|new Number(0)|
|-0||"0"||false|new Number(-0)|
|NaN||"NaN"||false|new Number(NaN)|
|Infinity||"Infinity"||true|new Number(Infinity)|
|-Infinity||"-Infinity"||true|new Number(-Infinity)|
|1(无穷大，非零)||"1"||true|new Number(1)|
|{}(任意对象)||特殊|特殊|true||
|\[\](任意数组)||""|0|true||
|\[9\](1个数字元素)||"9"|9|true||
|\["a"\](其他数组)||使用join()方法|NaN|true||
|function(){}(任意函数)|见下|NaN|true||

* 对象到原始值的转换
  * 显示类型转换
    * 最简单就是使用Number()、String()、Boolean()、Object()函数，他们在不通过new运算符调用时，会作为类型转换函数
  * 隐式类型转换
    * 加号+ 有一个值是字符串时会把另一个也转换成字符串；有一个值是对象，则会将对象用特殊方法转成原始值
    * 取反! 会把值转换为布尔值并取反
    * 减法-乘法\*除法/ 会将字符串转换为数字
    
 对象转换到原始值的两个函数
  * toString()，所有对象都有，返回一个反应这个对象的字符串
    * 除了undefined和null外都有toString()方法，这个方法通常和String()方法的返回结果一致
    * Number类定义的toString()可以接收表示转换基数的可选参数，范围2~36，不指定则为十进制
      * toFixed()根据小数点后的指定位数键数字转换为字符串，从不使用指数计数法
      * toExponential()使用指数计数法将数字转换为指数形式字符串，小数点前只有1位，小数点后的位数与参数相同
      * toPrecision()根据指定的有效数字位将数字转换为字符串，若有效数字少于数字整数部分的位数，则转换为指数形式
      * parseInt()只解析整数，值的前缀是0x或0X时可以解析成十六进制数，第二个参数可以接收表示转换基数的可选参数，范围2~36
      * parseFloat()可以解析整数和浮点数
  * valueOf()，如果存在任意原始值，则将对象转换为原始值。对象时复合值，简单地返回对象本身
 转换过程
  * 对象到字符串：
    1. 如果对象有toString()，则调toString()。如果返回原始值，则将他转换为字符串并返回。
    2. 如果对象没有toString()或返回值不是一个原始值，则调用valueOf()，若存在valueOf()，则调用，若返回时一个原始值，则将其转换为字符串并返回。
    3. 否则，抛出一个类型错误异常
  * 对象到数字
    1. 如果对象有valueOf()，则调valueOf()。如果返回原始值，则将他转换为数字并返回。
    2. 否则，如果对象有toString()并返回值一个原始值，则调用并将其转换为数字并返回。
    3. 否则，抛出一个类型错误异常

 * JavaScript中的+运算符可以进行数学加法和字符串连接操作。如果它的其中一个操作数是对象，则JavaScript将使用特殊的方法将对象转换成为原始值，而不是使用其他算术运算符的方法执行对象到数字的转换。
 * +和==应用的对象到原始值的转换包含日期对象的一种特殊情形。日期类是JavaScript语言核心中唯一的预先定义类型，它定义了有意义的向字符串和数字类型的转换。对于所有非日期的对象来说，对象到原始值的转换基本上是对象到数字的转换（首先调用valueOf()），日期对象则使用对象到字符串的转换模式，然而，这里的转换和上文讲述的并不完全一致：通过valueOf()或toString()返回的原始值将被直接使用，而不会被强制转换为数字或字符串。
 * 和==一样，<运算符以及其他关系运算符也会做对象到原始值的转换，但要除去日期对象的特殊情形：任何对象都会首先尝试调用valueOf()，然后调用toString()。不管得到的原始值是否直接使用，它都不会进一步被转换为数字或字符串。
 * “+”、“==”、“！=”和关系运算符是唯一执行这种特殊的字符串到原始值的转换方式的运算符。其他运算符到特定类型的转换都很明确，而且对日期对象来讲也没有特殊情况。例如“-”（减号）运算符把它的两个操作数都转换为数字。下面的代码展示了日期对象和“+”、“-”、“==”以及“>”的运行结果：
 ```
 var now =new Date();//创建一个日期对象
 typeof(now+1); //=>"string"：“+”将日期转换为字符串
 typeof(now-1);//=>"number":"-"使用对象到数字的转换
 now== now.toString(); //=>true:隐式的和显示的字符串转换
 now>(now-1);//=>true:">"将日期转换为数字
 ```
